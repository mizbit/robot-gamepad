!function(c){c.f[32]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,o=c.r(4),i=c.r(0),r=c.r(1),s=c.r(33),a=c.r(3),l=c.r(36);c.r(14).injectGlobal(n||(n=o.__makeTemplateObject(['\nbody {\n    margin: 0;\n    padding: 0;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n      "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n  \n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New",\n      monospace;\n  }\n  '],['\nbody {\n    margin: 0;\n    padding: 0;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n      "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n  \n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New",\n      monospace;\n  }\n  ']))),r.render(i.createElement(a.Provider,{store:l.default},i.createElement(s.default,null)),document.getElementById("root"))},c.f[33]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=c.r(4),i=c.r(0),r=c.r(5),s=c.r(34),a=c.r(35),l=c.r(3),n=function(n){function e(e){var t=n.call(this,e)||this;return t._observers={axis:t.props.store.gamepad.axis.observe(t.onAxisChange.bind(t)),button:t.props.store.gamepad.button.observe(t.onButtonChange.bind(t))},t}return o.__extends(e,n),e.prototype.onAxisChange=function(e){if("leftStick"===e.name){var t,n,o,i=e.object.get(e.name),r=i.x,s=-1*i.y,a=Math.sqrt(r*r+s*s)/Math.sqrt(2),l=Math.atan2(r,s)*(180/Math.PI);0<l&&l<=90?n=(90-l)/90*(t=100):90<l&&l<=180?n=(l-90)/90*(t=100):t=l<-90&&-180<=l?(-1*l-90)/90*(n=100):90- -1*l/90*(n=100);var c=n*a*(o=0<s?1:-1),u=t*a*o;this.props.store.motors.leftMotor=u,this.props.store.motors.rightMotor=c}},e.prototype.onButtonChange=function(e){e.object.get(e.name)&&(console.log("Button "+e.name),this.props.store.rpc.call("Robot.cmd",{cmd:"motor",left:0,right:0},"",function(e,t,n){e&&console.log(e)}))},e.prototype.componentWillUnmount=function(){this._observers.axis(),this._observers.button()},e.prototype.render=function(){var e=this.props.store.gamepad;return i.createElement(a.Panel,null,i.createElement(r.GamepadInput,{index:0,onConnect:e.connectHandler,onDisconnect:e.disconnectHandler,onAxis:e.onAxisValue,onButton:e.onButton},i.createElement(r.GamepadPreview,{src:"http://res.cloudinary.com/headlight/image/upload/v1523206548/gamepadSprite.png"})),e.connected&&i.createElement(a.PanelRow,null,i.createElement(s.Gauge,{value:this.props.store.motors.leftMotor}),i.createElement(s.Gauge,{value:this.props.store.motors.rightMotor})))},e=o.__decorate([l.inject("store"),l.observer,o.__metadata("design:paramtypes",[Object])],e)}(i.Component);t.default=n},c.f[34]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=c.r(4),i=c.r(0),r=c.r(31),n=function(n){function e(e){var t=n.call(this,e)||this;return t.reverse=!1,t.canvasDidMountBound=t.canvasDidMount.bind(t),t.updateAnimationBound=t.updateAnimation.bind(t),t}return o.__extends(e,n),e.prototype.componentDidMount=function(){window.requestAnimationFrame(this.updateAnimationBound)},e.prototype.componentDidUpdate=function(){window.requestAnimationFrame(this.updateAnimationBound)},e.prototype.canvasDidMount=function(e){if(e){this.gauge=new r.Gauge(e).setOptions({angle:.15,lineWidth:.44,renderTicks:{divisions:5,divWidth:1.1,divLength:.7,divColor:"#333333",subDivisions:5,subLength:.5,subWidth:.6,subColor:"#666666"},pointer:{length:.9,strokeWidth:.035},colorStart:"#6FADCF",colorStop:"#8FC0DA",strokeColor:"#E0E0E0"})}},e.prototype.updateAnimation=function(){var e=!1;if(this.props.value<0&&(e=!0),e!==this.reverse){var t={colorStart:0<=this.props.value?"#6FADCF":"#FB9692",colorStop:0<=this.props.value?"#8FC0DA":"#FFA6A2",strokeColor:"#E0E0E0"};this.gauge.setOptions(t),this.reverse=e}this.gauge.set(Math.abs(this.props.value))},e.prototype.render=function(){return i.createElement("canvas",{ref:this.canvasDidMountBound})},e}(i.Component);t.Gauge=n},c.f[35]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,o,i=c.r(4),r=c.r(14);t.Panel=r.default.div(n||(n=i.__makeTemplateObject(["\n  background-color: white;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(10px + 2vmin);\n  color: black;\n  margin: auto;\n  max-width: 100vh;\n"],["\n  background-color: white;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(10px + 2vmin);\n  color: black;\n  margin: auto;\n  max-width: 100vh;\n"]))),t.PanelRow=r.default.div(o||(o=i.__makeTemplateObject(["\n  display: flex;\n  flex-direction: row;\n  max-width: 100vh;\n"],["\n  display: flex;\n  flex-direction: row;\n  max-width: 100vh;\n"])))},c.f[36]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=c.r(37),o=c.r(38),i=c.r(39),r={gamepad:new n.default,rpc:new i.default({host:"robot-43CF98.local"})};r.motors=new o.default(r),t.default=r},c.f[37]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=c.r(4),o=c.r(2),i=function(){function e(){this.axis=o.observable.map({},{deep:!1}),this.button=o.observable.map({},{deep:!1}),this.connected=!1,this.connectHandler=this.connectHandler.bind(this),this.disconnectHandler=this.disconnectHandler.bind(this),this.onAxisValue=this.onAxisValue.bind(this),this.onButton=this.onButton.bind(this)}return e.prototype.connectHandler=function(e){this.connected=!0},e.prototype.disconnectHandler=function(e){this.connected=!1},e.prototype.onAxisValue=function(e,t,n,o){if(Math.abs(n)<.1&&(n=0),this.axis.has(e)){i=this.axis.get(e);i={x:"x"==t?n:i.x,y:"y"==t?n:i.y},this.axis.set(e,i)}else{var i={x:"x"==t?n:0,y:"y"==t?n:0};this.axis.set(e,i)}},e.prototype.onButton=function(e,t){this.button.set(e,t)},n.__decorate([o.observable,n.__metadata("design:type",Boolean)],e.prototype,"connected",void 0),e}();t.default=i},c.f[38]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=c.r(4),o=c.r(2),i=function(){function e(e){var t=this;this.leftMotor=0,this.rightMotor=0,o.autorun(function(){e.rpc.call("Robot.cmd",{cmd:"motor",left:Math.round(t.leftMotor),right:Math.round(t.rightMotor)},"",function(e,t,n){e&&console.log(e)}),console.log(t.leftMotor)},{delay:200})}return n.__decorate([o.observable,n.__metadata("design:type",Number)],e.prototype,"leftMotor",void 0),n.__decorate([o.observable,n.__metadata("design:type",Number)],e.prototype,"rightMotor",void 0),e}();t.default=i},c.f[39]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.active=!1,this._timerHandle=null,this._queueSize=0,this._queue={};var t=e.host;this._host=t,this.timeout=e.timeout||1e4,this.connect()}return e.prototype.connect=function(){var n=this;console.log("connecting to ws://"+this._host+"/rpc"),this.ws=new WebSocket("ws://"+this._host+"/rpc"),this.active=!1,this._disableTimer(),this.ws.addEventListener("open",function(e){n.active=!0,console.log("opened rpc socket")}),this.ws.addEventListener("close",function(e){n.active=!1,console.log("closed rpc socket"),n._disableTimer()}),this.ws.addEventListener("error",function(e){n._onerror(new Error("WebSocket Error"),e)}),this.ws.addEventListener("message",function(t){try{var e=JSON.parse(t.data);n._onmessage(e)}catch(e){console.log(t.data),console.log(e)}}),this.frameid=0},e.prototype._disableTimer=function(){this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)},e.prototype._enableTimer=function(){null==this._timerHandle&&(this._timerHandle=setInterval(this._timerTrigger.bind(this),1e3))},e.prototype._timerTrigger=function(){var o=this;0!=Object.keys(this._queue).length?(Object.keys(this._queue).forEach(function(e){var t=o._queue[e];if(0==o.active){delete o._queue[e];var n={code:503,message:"The transport is not active."};setTimeout(t.callback.bind(o),0,n,null)}else if((new Date).getTime()-t.datetime>=o.timeout){delete o._queue[e];n={code:408,message:"Request timed out."};setTimeout(t.callback.bind(o),0,n,null)}}),0==Object.keys(this._queue).length&&this._disableTimer()):this._disableTimer()},e.prototype._onerror=function(e,t){console.log(e),console.log(t)},e.prototype._onmessage=function(e){if(Object.getPrototypeOf(e)!==Object.prototype)return console.log("THE RESPONSE IS NOT AN OBJECT!"),void this._onerror(new Error("The response is not valid JSON object."),e);if(void 0!==e.id){var t=this._queue[e.id];null!=t?(delete this._queue[e.id],void 0!==e.error?t.callback(e.error,null,e.id,e.tag||null):t.callback(null,e.result,e.id,e.tag||null)):this._onerror(new Error("Received response for unknown request"),e)}else this._onerror(new Error("Malformed JSON object (missing ID property)."),e)},e.prototype.call=function(e,t,n,o){if(this.active){t=t||{},n=n||"";var i=++this.frameid,r={method:e,args:t,tag:n,id:i};this._queue[i]={datetime:(new Date).getTime(),payload:r,callback:o},this.ws.send(JSON.stringify(r)),this._enableTimer()}else{this.connect();o({code:400,message:"RPC transport is not active. Subscribe to on(open) event."},null,null)}},e}();t.default=n},c.f[40]=function(e,t){e.exports=React},c.f[41]=function(e,t){e.exports=ReactDOM},c.f[42]=function(e,t){e.exports=mobx},c.f[43]=function(e,t){e.exports=mobxReact},c.r(32)}($fsx);